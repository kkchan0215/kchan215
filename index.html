<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ë³‘ì› ëŒ€ê¸° ì‹œìŠ¤í…œ</title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #d9c2ff, #b388ff);
    color: #3a0066;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.container {
    background: #f3e8ff;
    width: 420px;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    text-align: center;
}
input {
    width: 80%;
    padding: 10px;
    border-radius: 10px;
    border: none;
    margin-bottom: 10px;
    font-size: 16px;
}
button {
    padding: 10px 15px;
    border-radius: 10px;
    border: none;
    background: #8e44ff;
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin: 5px;
}
button:disabled {
    background: #cbb3ff;
    cursor: not-allowed;
}
.current {
    font-size: 22px;
    margin: 15px 0;
    font-weight: bold;
}
.queue {
    background: white;
    border-radius: 10px;
    padding: 10px;
    max-height: 150px;
    overflow-y: auto;
}
.ticket {
    margin-top: 10px;
    font-weight: bold;
}
.admin-box {
    margin-top: 15px;
    padding-top: 10px;
    border-top: 2px dashed #b388ff;
}
</style>
</head>
<body>

<div class="container">
    <h1>ğŸ’œ ë³‘ì› ëŒ€ê¸° ì‹œìŠ¤í…œ</h1>

    <input type="text" id="nameInput" placeholder="ì´ë¦„ ì…ë ¥" />
    <button onclick="register()">ì ‘ìˆ˜í•˜ê¸°</button>
    <div class="ticket" id="ticket"></div>

    <div class="current">í˜„ì¬ ì§„ë£Œ ì¤‘: <span id="currentNumber">ì—†ìŒ</span></div>
    <div class="queue" id="queueList"></div>

    <div class="admin-box">
        <input type="password" id="adminPass" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸" />
        <button onclick="adminLogin()">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
        <br>
        <button id="nextBtn" onclick="nextPatient()" disabled>ë‹¤ìŒ í™˜ì â–¶</button>
    </div>
</div>

<script>
const ADMIN_PASSWORD = "9999";
let isAdmin = false;

let queue = JSON.parse(localStorage.getItem("hospitalQueue")) || [];
let current = localStorage.getItem("currentPatient") || "ì—†ìŒ";
let lastNumber = parseInt(localStorage.getItem("lastNumber")) || 0;

function saveData() {
    localStorage.setItem("hospitalQueue", JSON.stringify(queue));
    localStorage.setItem("currentPatient", current);
    localStorage.setItem("lastNumber", lastNumber);
}

function register() {
    const name = document.getElementById("nameInput").value.trim();
    if (!name) return alert("ì´ë¦„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

    lastNumber++;
    const patient = { number: lastNumber, name };
    queue.push(patient);

    document.getElementById("ticket").innerText =
        `${name}ë‹˜ ëŒ€ê¸°ë²ˆí˜¸: ${lastNumber}`;

    document.getElementById("nameInput").value = "";
    saveData();
    render();
}

function adminLogin() {
    const pass = document.getElementById("adminPass").value;
    if (pass === ADMIN_PASSWORD) {
        isAdmin = true;
        document.getElementById("nextBtn").disabled = false;
        alert("ê´€ë¦¬ì ëª¨ë“œ í™œì„±í™”");
    } else {
        alert("ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼");
    }
}

function nextPatient() {
    if (!isAdmin) return;

    if (queue.length === 0) {
        current = "ì—†ìŒ";
    } else {
        const next = queue.shift();
        current = next.number;
    }
    saveData();
    render();
}

function render() {
    document.getElementById("currentNumber").innerText = current;
    const list = document.getElementById("queueList");
    list.innerHTML = "";
    queue.forEach(p => {
        const div = document.createElement("div");
        div.innerText = `ëŒ€ê¸° ${p.number}ë²ˆ - ${p.name}`;
        list.appendChild(div);
    });
}

render();
</script>

</body>
</html>
